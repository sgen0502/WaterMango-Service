(window.webpackJsonpwatermango_ui=window.webpackJsonpwatermango_ui||[]).push([[0],{126:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),c=n(15),o=n.n(c),i=(n(86),n(21)),u=n(22),l=n(42),f=n(38),h=n(41),p=(n(87),n(155)),d=n(156),m=n(148),w=n(149),g=n(132),v=function(e){return s.a.createElement(m.a,{position:"static"},s.a.createElement(w.a,null,s.a.createElement(g.a,{variant:"h6"},e.title)))},b=n(152),E=n(153),k=n(150),y=n(151),j=n(154),O=n(13),R=n.n(O),S=n(19),W=n(33),x=n(17),A=n(73),T=n.n(A),q=function(){function e(t){Object(i.a)(this,e),this.DefaultHeaders={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},this.request=void 0,this.request=T.a.create({baseURL:t,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},responseType:"json"})}return Object(u.a)(e,[{key:"get",value:function(){var e=Object(S.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.request){e.next=4;break}return e.next=3,this.request.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTyped",value:function(){var e=Object(S.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.request){e.next=4;break}return e.next=3,this.request.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(S.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.request){e.next=4;break}return e.next=3,this.request.post(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(S.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.request){e.next=4;break}return e.next=3,this.request.put(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),I={uris:{base:"https://localhost:5001/",getAll:"api/plants",get:"api/plants/",update:"api/plants/"}},N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this))).request=new q(I.uris.base),e.plants=[],e.state={rows:[]},e.loadRows=e.loadRows.bind(Object(W.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"loadRows",value:function(){var e=Object(S.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.getTyped(I.uris.getAll);case 2:(t=e.sent)&&this.setRows(t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRows",value:function(e){this.plants=e,this.setState({rows:e})}},{key:"getRows",value:function(){return this.state.rows}},{key:"updateRow",value:function(e,t){var n=this.plants.findIndex((function(t){return t.id===e}));this.plants[n]=t,this.setState({rows:this.plants})}}]),t}(x.a),G=n(74),C=n.n(G),U=n(159);!function(e){e[e.OPEN=0]="OPEN",e[e.WATERING=1]="WATERING",e[e.WAITING=2]="WAITING",e[e.ALERT=3]="ALERT"}(a||(a={}));var H=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(U.a,{variant:function(){switch(e.status){case 3:return"outlined";default:return"default"}}(),color:function(){switch(e.status){case a.WATERING:return"primary";case a.WAITING:case a.ALERT:return"secondary";default:return"default"}}(),label:function(){switch(e.status){case a.WATERING:return"Feeding water";case a.WAITING:return"This plant needs to rest.";case a.ALERT:return"Was not feed for 6 hours!";default:return"Give water!"}}()}))},F=n(158),L=n(40),M=n(77),P=function(){function e(){Object(i.a)(this,e),this.connection=void 0,this.connection=(new M.a).withUrl("https://localhost:5001/plantstatushub").build(),this.connectionSettings()}return Object(u.a)(e,[{key:"connectionSettings",value:function(){var e=Object(S.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.connection.on("ReceiveMessage",(function(e,t){console.log("".concat(e," ").concat(t))})),this.connection.on("StatusUpdate",(function(e,t,n){console.log("".concat(e," ").concat(t," ").concat(n))})),e.next=4,this.connection.start().then((function(){return console.log("Connected")})).catch((function(){return console.log("Failed to Connect")}));case 4:this.connection.invoke("ConnectStateManager").then((function(){return console.log("Successfully sent a message")})).catch((function(){return console.log("Failed to send a message")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"assign",value:function(e,t){this.connection.on(e,(function(){t()}))}},{key:"assignWithArgs",value:function(e,t){this.connection.on(e,(function(e,n,a){t(e,n,a)}))}},{key:"invoke",value:function(e,t,n){this.connection.invoke("SendStatusUpdate",e,t,n).then((function(){return console.log("Successfully sent a message")})).catch((function(){return console.log("Failed to send a message")}))}}]),e}(),D=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this))).signalHub=new P,e.sendStatusUpdate=e.sendStatusUpdate.bind(Object(W.a)(e)),e.assign=e.assign.bind(Object(W.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"assign",value:function(e,t){this.signalHub.assign(e,t)}},{key:"assignWithArgs",value:function(e,t){this.signalHub.assignWithArgs(e,t)}},{key:"sendStatusUpdate",value:function(e){this.signalHub.invoke(e.id,e.status,e.lastUpdate)}}]),t}(x.a),X=function(e){var t=new q(I.uris.base),n=Object(L.useSnackbar)().enqueueSnackbar,r=function(){var a=Object(S.a)(R.a.mark((function a(r,s){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.put(I.uris.update.concat(String(e.row.id)));case 3:r.loadRows(),s.sendStatusUpdate(e.row),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n("".concat(e.row.name," is current resting."),{variant:"warning"});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(x.c,{to:[N,D]},(function(t,n){return s.a.createElement(F.a,{variant:"contained",color:e.row.status===a.WATERING?"secondary":"primary",onClick:function(){return r(t,n)}},e.row.status===a.WATERING?"Cancel Watering for ".concat(e.row.name):"Give Water to ".concat(e.row.name))})))},Y=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(x.c,{to:[N]},(function(){return s.a.createElement(k.a,{key:e.row.id},s.a.createElement(y.a,null,e.row.name),s.a.createElement(y.a,null,C()(e.row.lastWaterSession).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement(y.a,null,s.a.createElement(H,{status:e.row.status})),s.a.createElement(y.a,null,s.a.createElement(X,{row:e.row})))})))},B=function(e){return s.a.useEffect((function(){e.container.loadRows()}),[e.container]),s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{variant:"h6"},e.title),s.a.createElement(b.a,{size:"small"},s.a.createElement(E.a,null,s.a.createElement(k.a,null,e.headers.map((function(e){return s.a.createElement(y.a,{key:e},e)})))),s.a.createElement(j.a,null,e.container.getRows().map((function(e){return s.a.createElement(Y,{key:e.id,row:e})})))))},J=function(e){var t=Object(L.useSnackbar)().enqueueSnackbar;return s.a.useEffect((function(){e.signalrContainer.assign("StatusUpdate",e.container.loadRows),e.signalrContainer.assignWithArgs("StatusUpdate",(function(e,n,r){n===a.ALERT&&t("Alert! Plant ID = ".concat(e," was not feed for 6 hours."),{variant:"error"})}))}),[t,e.container.loadRows,e.signalrContainer]),s.a.createElement("div",null)},_=["Name","When did water?","Status","Give Water!"],z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(f.a)(t).call(this,e))).state={loading:!0},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(x.b,null,s.a.createElement(L.SnackbarProvider,{maxSnack:3},s.a.createElement("div",null,s.a.createElement(v,{title:"Water Mango"}),s.a.createElement("main",null,s.a.createElement("div",{className:"content"},s.a.createElement(p.a,{maxWidth:"lg"},s.a.createElement(d.a,{container:!0,spacing:3},s.a.createElement(d.a,{item:!0,xs:12},s.a.createElement(x.c,{to:[N]},(function(e){return s.a.createElement(B,{title:"Plants Status",headers:_,container:e})})),s.a.createElement(x.c,{to:[N,D]},(function(e,t){return s.a.createElement(J,{container:e,signalrContainer:t})}))))))))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,t,n){e.exports=n(126)},86:function(e,t,n){},87:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.fa5f142e.chunk.js.map